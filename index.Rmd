---
title: "Chicago Bulls Prospective Player Analysis <br> 2019-20"
author: "Benny Pagett - u125511"
student ID: "u125511"
date: "`r Sys.Date()`"
output:
  rmdformats::readthedown: 
    css: custom_copy.css
    highlight: kate
    fig_caption: yes
bibliography: references/references_copy.bibtex 
csl: references/vancouver_access_date_superscipt.csl
df_print: knitr::kable
code_download: true
self_contained: false
mathjax: "http://example.com/MathJax.js"

---

```{r setup, include=FALSE}
library(knitr)
library(rmdformats)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(readr)
library(broom)
library(performance)
library(psych)
library(ggrepel)
library(plotly)
library(DT)
library(kableExtra)
library(car)

## Global options
options(max.print="75")
opts_chunk$set(echo=FALSE,
	             cache=FALSE,
               prompt=FALSE,
               tidy=TRUE,
               comment=NA,
               message=FALSE,
               warning=FALSE)
opts_knit$set(width=75)

```

```{r project data loading, cache=FALSE, include=FALSE}

## Reading in Raw Project data
## 18-19 Player salaries
dfsal <- read_csv("data/project-data/2018-19_nba_player-salaries.csv")
## 18-19Player Stats
df_ind_stats <- read_csv("data/project-data/2018-19_nba_player-statistics.csv")
## 18-19 Stats 1
df_team_Stats1 <- read_csv("data/project-data/2018-19_nba_team-statistics_1.csv")
## 18-19 Stats 2
df_team_Stats2 <- read_csv("data/project-data/2018-19_nba_team-statistics_2.csv")
## 2019-20 Pay roll team
dfPay <- read_csv("data/project-data/2019-20_nba_team-payroll.csv")
```

```{r process_data, include=FALSE, cache=FALSE}

## NBA 18-19 Player stats and salaries
player_stats_tidy <- readr::read_csv("data/tidy_data/player_stats_tidy.csv")
## NBA 18-19 Transfer Player Stats
df_ind_stats <- readr::read_csv("data/tidy_data/df_TOT_players.csv")
## 18-19 NBA Stats 1
df_team_Stats1 <- readr::read_csv("data/tidy_data/df_team_Stats2.csv")
## 18-19 NBA Stats 2
df_team_Stats2 <- readr::read_csv("data/tidy_data/df_team_Stats1.csv")
## 2019-20 Pay roll team
dfPay <- readr::read_csv("data/project-data/2019-20_nba_team-payroll.csv")# runs code but not in final document
```

```{r Tidy_data, cache=FALSE, include=FALSE}
## player_stats_tidy
player_stats_tidy <- readr::read_csv("data/tidy_data/player_stats_tidy.csv")
## Teams Stats for Win percentage 
df_Stats1_Tm_W <- readr::read_csv("data/tidy_data/df_team_Stats1.csv")
## 18-19 Stats 1
df_Stats2_Tm_W <- readr::read_csv("data/tidy_data/df_team_Stats2.csv")
## df_nonTOT_players
df_nonTOT_clean <- read_csv("data/tidy_data/df_nonTOT_clean.csv")
```

```{r source_linear_analysis, echo=FALSE, include=FALSE}

source("funcs/Exploratory_Analysis_2.R", local = TRUE)

```

```{r source_bulls_multi_init, include=FALSE, cache = TRUE}  
source("funcs/Bulls_multi_reg.R", local = TRUE)
```

```{r Bulls logo7G, echo=FALSE, fig.retina = 2, out.width = '30%',fig.width = 6, fig.asp = 0.618, fig.align = "center"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

# 1. Introduction:

This interactive website is the tangible report component of a reproducible data analysis project. The project is based upon a fictitious task given to the data analytics team for the Chicago Bulls NBA organisation to provide a prospective player analysis report for the General Manager to help rebuild the team for next season. The task detailed the assessment of potential players to join/retain for the Chicago Bulls organisation for the 2019-20 NBA season. 


```{r logo_intro, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

***
# 2. Report scenario:
This project is based around the "Moneyball" theory of using statistical analysis to provide a greater insight into sport performances, in this case the selection/purchase of players from the 2018-19 season of the NBA who would help produce greater results for the Chicago Bulls organisation to improve on their past season result (finishing 13th in the Eastern Conference, and 27th overall on Win-Loss ratio) and provide an improved result for the upcoming 2019-2020 NBA season.  
  
The assigned task included the following:  

  * The assessment of potential players to purchase or retain for the Chicago Bulls organisation for the 2019-20 NBA season.  
  * Projection of expected results with selected players.    
  * Selection of 5 players, one from each [position](https://en.wikipedia.org/wiki/Basketball_positions)
      * Center = C
      * Power Forward = PF
      * Small Forward = SF
      * Shooting Guard = SG
      * Point Guard = PG  
  * Ensure purchase of the 5 players was within the allotted budget of $118 million dollars.  
  * The proposed purchases must allow enough budget to still field the other remaining players required for an NBA team (NBA teams are allowed 15 players total).  
  
The use of statistics in sport is not a new phenomenon [@Vaz_de_Melo2008-bg] [@Khan2013-vy], partly due to influences from the likes of Bill James [Bill james basketball stats link] and John Hollinger [@noauthor_undated-pl] who implemented and revolutionised the use of statistical analysis, which is now common within sports like basketball and in particular the North American basketball league the NBA. John Hollinger created the all in one metric the Player Efficiency Rating or PER, which allowed for the collection of several variables (i.e both positive and negative outcomes e.g points, turnovers, free throw misses, personal fouls etc.) to be used as an indicator of player performance, and especially be able to be used as an inter and intra reliable measure.

```{r logo_aim, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

***
## Project aim:

The hypothesis for this project is based on the use of a combination of known analysis methods/variables to create a predictive equation to aid in the selection of appropriate players for the Chicago Bulls 19/20 season in the NBA.[@noauthor_undated-du] 

By selecting players that attained above specific values in the selected key metrics, it is hypothesized that an increase in points/min could be achieved which is associated to an increased win percentage. 

As such, the project aims to prove that choosing players that contribute to increasing the team points per minute average, would equate to increased team wins, with a goal of achieving greater than 42 wins/50% win percentage and progressing to playoffs[@Fromal2012-yb].

The purpose and problem that this method of analysis addresses is a way to see through the inflated market values for athletes and highlight the true value of players based on their repeated habits and trends of play. I believe that the predictive formula below can provide valuable insight into the real value and contribution players are making/could make in a new team.

```{r logo_metrics, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

***
## Positions and key metrics used in the NBA

Basketball has 5 [positions](https://en.wikipedia.org/wiki/Basketball_positions). Although the roles are fixed, there is some variation to the roles, and it is common for some players to play across two positions, depending on the team/other members of the team.

Positions and key roles to look at:

  * PF = Power Forward  
      * Offence = Playing near to the basket, rebounding. 
        * Does have shooting role - 2P > 3P
      * Defence = Defending taller players and rebounds.  
  * C = Center  
      * Offence = Tries to score on close shots and gather offencive rebounds.  
        * Predominately 2P  
      * Defence =  Centre tries to block opponents’ shots and rebound their misses.  
  * PG = Point Guard  
      * Offence = Runs plays, shooter, passer, dribble.   
        * Good shooter 3P > 2P  
      * Defence = Defensively looks to steal from opposing PG  
  * SG = Shooting Guard  
      * Offence = Predominantly a shooter, dribbler and passer 3P  
      * Defence = steals and blocks  
  * SF = Small Forward  
      * Offence = Plays within the key - Shoots regularly - close and far. Universal player  
      * Defence =  Universal role  

As the game of basketball has evolved, so have the tools used to measure a players performance. The list of useable [metrics](https://bleacherreport.com/articles/1813902-advanced-nba-stats-for-dummies-how-to-understand-the-new-hoops-math) used and recorded from a standard NBA game are long and each interpretable variable has had its time in the limelight.

## Variables/Metrics targeted in the analysis: 

The variables selected were used to show an association with an increase in overall win percentage due to an increase of points per minute played.  

**The variables used for the predictive value were:**  

  * **Effective Field Goal Percentage (eFGp)**  
  * **Trade Value (TrV)**  
  * **Efficiency rate (EFF)**  
  * **Usage Rate (Tm_use)**    
  * **Total Rebounds per minute (TRB_MP)**    
  * **Points per minute (PTS_per_MP)**  

Dean Oliver[@noauthor_undated-ht] refers to the ["Four Factors"](http://www.rawbw.com/~deano/articles/20040601_roboscout.htm) of Basketball adding that metrics/ratings can be broken down into four elements of the game: shooting, turnovers, rebounding, and getting to the foul line. It is in this framework that I believe that using a multifaceted approach to the analysis of player performance decreases the disparity between observed results and predictive results.
  
**Points per minute**
$$
\beta_1 = -0.382 + 0.699 * eFGp + -0.0330 * TRB\_MP + 2.39 * Tm\_use\_total + 0.00000965 * EFF + -0.00000803 * TrV
$$
</br>
```{r logo_rep_scen, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

***
## Justification and importance:
  
The previous 2018-19 season saw the Chicago Bulls finish 27th out of 30 teams in the NBA (on win-loss record). The Chicago Bulls organisation has aspirations to rebuild their line-up and field a team with championship title potential for the upcoming 2019-20 season.

### Background on variables:

By balancing statistical variables such as usage rates, efficiency ratings and other varying offensive/defensive ratings of the five players on a basketball court, a team can achieve optimal offensive output. This can bee seen through repeated game stats and team habits on the court[@noauthor_2017-ev]. 

Interestingly the trends show that, for all players, as a player uses more possessions, his efficiency decreases. In the eyes of some statistical analysts what defines a superstar, is someone who can carry a larger proportion of a teams possessions and produce points with only a relatively small drop in efficiency. Meanwhile, the opposite is also true: Players perform more efficiently when they are asked to use fewer of their teams possessions. As a result, the greater burden on the superstar means that supporting players maintain low usage rates, allowing them to operate closer to their peak efficiency.

In an effort to determine how much impact players have on their teams, sports statisticians have developed metrics such as Usage Percentage. Examining Usage Percentage gives us an indication of how efficient a player is given the amount of possessions he uses.[@Schuhmann2021-am]

What defines a quality player is someone who can have a high Usage Percentage, but still plays at a high rate of efficiency. Teams can look at the Usage Percentage of players on their team, and determine how to balance usage across their lineup to maximize team efficiency.[@Paine2015-mu]

As with other combination metrics within sport, the aim of the predictive formula, albeit complicated on first glance, the basic idea is to look at a player's combination of independent and dependent metrics and find the percentage of the team totals he uses in those same categories.[@noauthor_undated-pl]  
  

```{r logo_calculations, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

*** 
## Relevant calculations {.tabset .tabset-pills}

The following calculations were used within the analysis process and are referred to regularly throughout this report.

### **Usage rate equation (TM_use_total)**

**Usage rate equation (TM_use_total)**

  * [Usage Rate](https://www.nbastuffer.com/analytics101/usage-rate/) Usage rate/usage percentage is an estimate of the percentage of how much team plays utilise a player while he was on the floor. The basis of the formula is to look at a player's combination of field goal attempts, free throw attempts and turnovers, and find the percentage of the team totals he is used in those same categories.
  
    It is calculated by:   
$$
Useage(\%) = 100* \frac{((FGA+0.44*FTA+TOV)*(TM\_MP/5))}{(MP*(TM\_FGA+0.44*TM\_FTA+TM\_TOV))}
$$
  
### **Effective field goal percentage (eFGp)**

**Effective field goal percentage (eFGp)**

  * [Effective Field Goal Percentage (eFGp)](https://www.basketball-reference.com/about/glossary.html#:~:text=eFG%25%20%2D%20Effective%20Field%20Goal%20Percentage,for%2010%20with%200%20threes.) A statistic that adjusts field goal percentage to account for the fact that three-point field goals count for three points while field goals only count for two points. Its purpose is to equalise the field goal output percentage between two-point shooters and three-pointers shooters.

    It is calculated by: 
$$
eFG(\%) =\frac{FG+(0.5*3P)}{FGA}
$$

### **Efficiency Value** 

**Efficiency Value**

  * [Efficiency Value](https://www.nbastuffer.com/analytics101/nba-efficiency/), is a metric invented by Martin Manley, is being considered the first ever player evaluation metric which indicates a players linear efficiency.[@Wikipedia_contributors2021-mv]

    It is calculated by: 
$$
EFF = \frac{(PTS + TRB + AST + STL + BLK − (FGA-FG) − (FTA-FT) - TOV)}{GP} 
$$

### **Trade Value**

  **Trade Value**
  
  * [Trade Value](https://www.nbastuffer.com/analytics101/trade-value/) is the estimate using a players age and his approximate value to determine how much value a player has left in his career. Invented by Bill James.[@noauthor_2017-ug] [@noauthor_2017-id]
  
    It is calculated by: 
$$
TrV = \frac{[(AV Formula - 27-0.75*Age)^2(27-0.75*Age +1)*AV Formula]}{190}+(AV Formula)*2/13
$$
  **Approximate Value**
  
  * [Credit Formula and Approx Value](https://www.nbastuffer.com/analytics101/approximate-value/) are metrics which are an estimate of a players value, making no fine distinctions, but, rather, distinguishing easily between very good seasons, average seasons, and poor seasons[@noauthor_2017-qp].

    It is calculated by:  
$$
AV Formula = \frac{(Credits^{3/4})}{21}
$$
 **Credits Formula** 

  * [Credit Formula and Approx Value](https://www.nbastuffer.com/analytics101/approximate-value/) is an aggregation of observations from a standard game/season, in combination used within the approximate value calculation.

    It is calculated by:   
$$
Credits Formula = (PTS)+(TRB)+(AST)+(STL)+(BLK)-(FGA-FG)-(FTA-FT)-(TOV)
$$

###  **Total rebounds/minute played (TRB_MP)**  

**Total rebounds/minute played (TRB_MP)**
    
  * The calculation of total rebounds per minute is simple in nature and essential to add in active offensive and defensive rebound involvement at a per minute played value so as to be able to compare across players varying game time levels. Crucial [inlfuences](http://www.rawbw.com/~deano/articles/20040601_roboscout.htm) on statistical analysis within basketball reference the importance of rebounding as one of the "Four Factors".  

    It is calculated by:  
$$
TRB\_MP = \frac{(ORB-DRB)}{MP}
$$

###  **Points/minute played (PTS_per_MP)** 

**Points/minute played (PTS_per_MP)**

  * [Points per minute](https://www.nbastuffer.com/analytics101/per-minute-ratings/) was included in the analysis to accurately compare points across players. Per-minute ratings were also used to calculate players’ totals in other metrics including points, steals, blocks, assists, turnovers etc, and  are calculated by taking the player's total in the relevant metric and dividing by the total of minutes played.
    
    It is calculated by:  
$$
Points\_per\_MP = \frac{MP}{G}
$$

###  **Team Win % (WinP_TM)**

**Team Win % (WinP_TM)**

  * To calculate [winning percentage](https://nesnclubhouse.com/skills/stat-book-calculating-winning-percentage/), the number of wins is divided by the number of games played. Team winning percentage was included in the model to explore the relationship of the individual player metrics and their contribution to a teams winning percentage.
  
    It is calculated by: 
$$
Win\% = \frac{TM\_W}{TM\_G}
$$

## {-}

```{r Bulls logo small7G, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

***  
# 3. Reading and cleaning the raw data 

This section details the process undertaken for the reading, cleaning and exporting of tidy data frames for further analysis. For further information on how to replicate this project please see the hosted [GitHub](https://github.com/bennypagett/bulls-project#chicago-bulls-project-player-analysis-and-recomendations) repo for further instructions.

### Reading and cleaning steps. {.tabset .tabset-pills}


#### 1. Data sources
<br> 

  * [www.basketball-reference.com](https://www.basketball-reference.com/leagues/NBA_2019_totals.html) Player statistics 2018-19 NBA season.[@noauthor_undated-st]
  
  * [www.hoopshype.com](https://hoopshype.com/salaries/) Player salaries/year in $USD.[@noauthor_undated-xt]

  * [www.hoopshype.com](https://hoopshype.com/salaries/) Oranisation/Team Payroll for 2018-19 [@noauthor_undated-vm]

  * [basketball-reference.com](https://www.basketball-reference.com/leagues/NBA_2019.html) Team statistics 2018-19 NBA season.

  * [basketball-reference.com](https://www.basketball-reference.com/leagues/NBA_2019.html) Team statistics 2018-19 NBA season.[@noauthor_undated-jx]
  
#### 2. Cleaning process  
<br>

The following steps were carried out to ensure the data was clean and processable ready for analysis:

  1. Files in *.csv format were imported "read" into the R program.  
  2. Distinguishable names assigned to each data frame.  
  3. Error checking and identify missing values across all data frames.  
  4. Convert NA values (implicit to explicit).  
  5. Remove/Dropping of any empty coloumns.  
  6. Comparison across data frames for common variable names.  
  7. Fix spelling/abbreviations of player names to ensure accurate data matching across data sets.  
  8. Fix team names to match abbreviations across data sets.  
  9. Checking for errors and missing values within the data sets.  
  10. Merging of data frames into one data set to allow comparison of variables.  
  11. Identify duplicates and collapse/aggregate values to have a one season value for each player. 
  12. Address any class issues due to merging i.e. numeric values are numeric etc
  12. Creation of variables at a rate of minutes played.  
  13. Creation of equations and new variables for predictive model analysis.  
  13. Separation of transfer players within the 18/19 season, identified as TOT players. 

#### 3. Tidy data frames exported
<br>

  1. The data frames were exported to *.csv files into a separate folder in the working directory.
  2. Data frames were imported/read in from clean *.csv files for further analysis via R scripts in R.

### {-}

```{r Bulls logo small-2-7G, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

***  
# 4. Exploratory analysis: 

## Exploratory steps {.tabset .tabset-pills}

### 1. NBA player data base

#### NBA player list for 2018-19 season

```{r NBA_player_list}
DT::datatable(player_stats_tidy, caption = "Registered NBA players.")
```

### 2. Variable distribution

  * Large distribution of variable values across the data sets.
  * Several outliers exist with high points/min (and other stats) due to minimal game time/games.
  * Some left-tailed skewness in distribution.
  * Identified thresholds of outlier high points of influence/leverage to test in 
  
```{r source_lin2, include=FALSE, cache=FALSE}
source("funcs/Exploratory_Analysis_2.R", local = TRUE)

```

#### Box plot of Points/min per position
```{r Pos_box_plot, echo=FALSE}
##Box plot of position vs PTS_per_MP
ggplot(data = df_nonTOT_clean, aes(x = Pos, y = PTS_per_MP)) +
  geom_boxplot(aes(fill = Pos)) +
  scale_fill_discrete(name = "Pos", labels = c("1 = C", "2 = PF", "3 = PG","4 = SF", "5 = SG"))

```

#### Team Win % vs Points/min
```{r WinP_TM_v_PTS, echo=FALSE, dependson= "source_lin2"}
## Scatter plot with PTS_per_MP and WinP_Tm with Pos colour
ggplot(data = df_nonTOT_clean, aes(x = PTS_per_MP, y = WinP_Tm, colour = Pos)) +
  geom_point() +
  geom_smooth(method = "lm") +
  scale_fill_discrete(name = "Pos", labels = c("1 = C", "2 = PF", "3 = PG","4 = SF", "5 = SG"))
```


```{r source_exploratory, echo=FALSE, include=FALSE}

source("funcs/Exploratory_Analysis_2.R", local = TRUE)

```

#### Histogram distribution of Effective field goal %
```{r eFG_histogram, echo=FALSE}
ggplot(data = df_nonTOT_clean) +
  geom_histogram(mapping = aes(x = eFGp), colour = "black", fill = "dodgerblue")
```


### 3. Variable relationships:  

```{r source_multi_reg, include=FALSE}
source("funcs/Bulls_multi_reg.R", local = TRUE)
```

#### Relationship between EFF and eFGp  

```{r EFF_v_eFGp, echo=FALSE, dependson= "source_bulls_multi_init", cache=FALSE}
library(plotly)
eff_v_eFGp <- ggplot(data = df_nonTOT_clean, aes(x = EFF, y = eFGp, color = Pos, label = Tm, group = 1, 
                                   text = paste("Name:", player_name,
                                                "<br>Team: =", Tm,
                                                "<br>Salary: ", salary,
                                                "<br>Trade Value: ", TrV,
                                                "<br>Efficiency: ", EFF,
                                                "<br>Points/min: ", round(PTS_per_MP, digits = 4), "Pts/min",
                                                "<br>Team Usage %:", Tm_use_total,
                                                "<br>Total Rebounds/min:", TRB_MP))) + 
  labs(title = "EFF vs eFGp", 
       subtitle = "Teams have increased winning % with an increased pts/min", 
       caption = "compiled from data sources",
       colour = "Position") +
  geom_point() +
  geom_smooth(method = "lm") +
  xlab("Efficiency Rate") +
  ylab("Effective Field Goal (%)")

ggplotly(eff_v_eFGp, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))

## Teams that may be utilising SG more, may have more TOV and FTA/FGA/eFGp as they aren't converting attempts to PTS.
```
</br>

```{r source_team_pts_v_team_win, include=FALSE}
source("funcs/Bulls_multi_reg.R", local = TRUE)
```

#### Relationship between Points/min and Team Win %  

```{r team_WinP_model_test, echo=FALSE, cache=FALSE}

### relationship between points per min and team winning percentage
WinP_v_Tm_Pts <- ggplot(data = model_testingTM_plot, aes(x = Tm_Pts_per_MP, y = WinP_Tm, color = Tm, label = Tm, group = 1, 
                                   text = paste("Team:", Tm,
                                                "<br>Win %: =", WinP_Tm,
                                                "<br>Points/min: ", round(Tm_Pts_per_MP, digits = 4), "Pts/min"))) + 
  labs(title = "Relationship between Team Win % and Team Points/min", 
       subtitle = "Teams have increased winning % with an increased pts/min", 
       caption = "compiled from data sources",
       colour = "Team") +
  geom_point() +
  geom_smooth(method = "lm", colour = "magenta", se = FALSE) +
  geom_hline(yintercept = 50, colour = "black", linetype = "dashed") +
  xlab("Team Points/min") +
  ylab("Team Win (%)") 

ggplotly(WinP_v_Tm_Pts, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))

```

#### Relationship between eFGp % and Team Win %  

```{r source_eFGp_v_team_win, include=FALSE}
source("funcs/Bulls_multi_reg.R", local = TRUE)
```

```{r plottly_eFGp_v_WinP_Tm, echo=FALSE, cache=FALSE}

 eFGp_v_WinP_Tm <- ggplot(data = df_nonTOT_clean, aes(x = eFGp, y = WinP_Tm, color = Pos, label = Tm, group = 1, 
                                                           text = paste("Name:", player_name,
                                                                        "<br>Team: =", Tm,
                                                                        "<br>Salary: ", salary,
                                                                        "<br>Trade Value: ", TrV,
                                                                        "<br>Efficiency: ", EFF,
                                                                        "<br>eFGp %: ", round(eFGp, digits = 4), "%",
                                                                        "<br>Points/min: ", round(PTS_per_MP, digits = 4), "Pts/min",
                                                                        "<br>Team Usage %:", Tm_use_total,
                                                                        "<br>Total Rebounds/min:", TRB_MP))) + 
    labs(title = "Relationship between eFG % and Team Win %", 
         subtitle = "Teams have increased winning % with an increased eFG %", 
         caption = "compiled from data sources",
         colour = "Pos") +
    geom_point() +
    geom_smooth(method = "lm", colour = "magenta", se = FALSE) +
    geom_hline(yintercept = 50, colour = "black", linetype = "dashed") +
    xlab("Effective Field Goal %") +
    ylab("Team Win (%)")
  
  ggplotly(eFGp_v_WinP_Tm, tooltip = "text") %>% 
    config(displayModeBar = "static", displaylogo = FALSE, 
           modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                         "hoverClosestCartesian", "hoverCompareCartesian", "select2d", "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))
  
  

```

#### Relationship between Points/min and EFF 

```{r source_EFF_v_PTS_per_MP, include=FALSE}
source("funcs/Bulls_multi_reg.R", local = TRUE)
```

```{r plotly_EFF_v_PTS_per_MP, echo=FALSE, cache=FALSE, dependson= "source_EFF_v_PTS_per_MP"}

 EFF_v_PTS_per_MP <- ggplot(data = df_nonTOT_clean, aes(x = EFF, y = PTS_per_MP, color = Pos, label = Tm, group = 1, 
                                                       text = paste("Name:", player_name,
                                                                    "<br>Team: =", Tm,
                                                                    "<br>Salary: ", salary,
                                                                    "<br>Trade Value: ", TrV,
                                                                    "<br>Efficiency: ", EFF,
                                                                    "<br>eFGp %: ", round(eFGp, digits = 4), "%",
                                                                    "<br>Points/min: ", round(PTS_per_MP, digits = 4), "Pts/min",
                                                                    "<br>Team Usage %:", Tm_use_total,
                                                                    "<br>Total Rebounds/min:", TRB_MP))) + 
    labs(title = "Relationship between EFF and Points/min", 
         subtitle = "Teams have increased Points/min with an increased EFF", 
         caption = "compiled from data sources",
         colour = "Pos") +
    geom_point() +
    geom_smooth(method = "lm", colour = "magenta", se = FALSE) +
    xlab("Points/min") +
    ylab("Efficiency Rating")
  
  ggplotly(EFF_v_PTS_per_MP, tooltip = "text") %>% 
    config(displayModeBar = "static", displaylogo = FALSE, 
           modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                         "hoverClosestCartesian", "hoverCompareCartesian", "select2d", "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))
  
## EFF vs PTS_Per_MP  
```


### 4. Linear model assessments 
<br>

#### Searching for confounding variables and single linear model:

#### Relationship between points per min and team winning percentage:

```  {r Lin_relationship, echo=FALSE}
library(ggplot2)
library(plotly)
WinP_v_Tm_Pts <- ggplot(data = model_testing, aes(x = Tm_Pts_per_MP, y = WinP_Tm, color = Tm, label = Tm, group = 1, 
                                   text = paste("Team:", Tm,
                                                "<br>Win %: =", WinP_Tm,
                                                "<br>Points/min: ", round(Tm_Pts_per_MP, digits = 4), "Pts/min"))) + 
  labs(title = "Relationship between Team Win % and Team Points/min", 
       subtitle = "Teams have increased winning % with an increased pts/min", 
       caption = "compiled from data sources",
       colour = "Team") +
  geom_point() +
  geom_smooth(method = "lm", colour = "magenta", se = FALSE) +
  geom_hline(yintercept = 50, colour = "black", linetype = "dashed") +
  xlab("Team Points/min") +
  ylab("Team Win (%)") 

ggplotly(WinP_v_Tm_Pts, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))

### relationship between points per min and team winning percentage

```
There appears to be a linear relationship between points/min and winning percentage. As points/min increases, there is an increase in team winning percentage.

### 5. Correlation co-efficient PTS_per_MP and WinP_Tm
<br>

```{r corr_co_pts, include=FALSE, cache=FALSE}
source("funcs/Exploratory_Analysis_2.R", local = TRUE)
corr_co_pts <- with(df_nonTOT_clean, cor(x = PTS_per_MP, y = WinP_Tm))
```

The correlation co-efficient = 0.055 suggesting a moderate-strong positive correlation between Points/min and team winning percentage as 0.55 is approaching the value of 1. 

```{r corr_co_pts_kable, echo=FALSE}
knitr::kable(corr_co_pts, col.names = c('Correlation coefficient'), align = ('c'))
```

### 6. Simple Linear Regression
<br>

```{r lin_model, include=FALSE, echo=TRUE, cache=FALSE}
source("funcs/Exploratory_Analysis_2.R", local = TRUE)
fit <- lm(WinP_Tm ~ PTS_per_MP, data = df_nonTOT_clean)
lin_model_fit <- tidy(fit,conf.int = TRUE)
```


```{r lin_model_fit, echo=FALSE}
kable(lin_model_fit, align = ('ccccccc'))
```


```{r summary_fit, echo=FALSE}
summary(fit)
```

The intercept co-efficient = 47.7, meaning that when the team winning percentage is 0, the expected points per minute = 47.7, which does not make much practical sense, but is a starting point for the model. The slope co-efficient = 5.85, meaning that for every 1 unit that points per min is increased, expected points per minutes increase by 5.85. The r squared value = -0.0003225, meaning that 0.03225% of the variance in team winning percentage is explained by the variance in points per minute.


```{r lin_mod, echo=FALSE}
lm(formula = WinP_Tm ~ PTS_per_MP, data = df_nonTOT_clean)
```

### 7. Independence 
<br>

The Durbin-Watson statistic = 0.01404402, which is not close to the recommended value of 2 meaning that the assumption of independence is possibly failed. However, this could be due to the filtered data set and the figures are from across teams and there is player movement/transfer between teams, which could influence the independence.

```{r lin_model_car, echo=FALSE}
library(car)
car::durbinWatsonTest(fit)

```

### 8. Outlier identification and leverage points
<br>

#### Outliers

```{r std_res, echo=FALSE}
std_res <- rstandard(fit)
points <- 1:length(std_res)
```


```{r std_res_gg, echo=FALSE}
library(ggplot2)
ggplot(data = NULL, aes(x = points, y = std_res)) +
  geom_point() +
  ylim(c(-4,4)) +
  geom_hline(yintercept = c(-3, 3), colour = "red", linetype = "dashed")
```

There does not appear to be any outliers as all standardised residuals are less than 3.

#### Leverage points

```{r hats_leverage, echo=FALSE}
hats <- hatvalues(fit)
ggplot(data = NULL, aes(x = points, y = hats)) +
  geom_point()
```

There are no hat values greater than 1, however it will be useful to investigate the points above 0.025, as they appear to stand out from the rest of the values. 

A need to investigate the points above 0.025.

```{r hat_labels, echo=FALSE}
hat_labels <- if_else(hats >= 0.025, paste(points), "")
ggplot(data = NULL, aes(x = points, y = hats)) +
  geom_point() +
  geom_text(aes(label = hat_labels), nudge_y = 0.005)
```

There are 5 points that could be influencing the model (1, 13, 45,104, 200). Determine if the points could be considered high influence


```{r cook_linear, echo=FALSE}
cook <- cooks.distance(fit)
ggplot(data = NULL, aes(x = points, y = cook)) +
  geom_point()
```


```{r cook_labels, echo=FALSE}
cook_labels <- if_else(cook >= 0.015, paste(points), "")
```

A need to investigate points above 0.015 that are standing out above the rest.

```{r cook_labels2, echo=FALSE}
cook_labels <- if_else(cook >= 0.015, paste(points), "")
ggplot(data = NULL, aes(x = points, y = cook)) +
  geom_point() +
  geom_text(aes(label = cook_labels), nudge_x = 8, nudge_y = 0.0005)
```


```{r gg_cook, echo=FALSE}
ggplot(data = df_nonTOT_clean, aes(x = PTS_per_MP, y = WinP_Tm)) +
  geom_point(colour = "dodgerblue") +
  geom_smooth(method = "lm", colour = "magenta", se = FALSE) +
  geom_hline(yintercept = 50, colour = "black", linetype ="dashed") +
  geom_text(aes(label = cook_labels), nudge_x = 1)
```

There are 11 points that could be influencing the model (1, 13, 14, 25, 45, 264, 269, 275, 283, 285, 288). This requires further assessment without the high influencing points


```{r outlier, include=FALSE}
outliers <- c(1, 13, 14, 25, 45, 264, 269, 275, 283, 285, 288)
df_LinR_filtered <- df_nonTOT_clean%>%
  filter(!player_name %in% outliers)
```

A re-run of the linear regression with filtered_df

```{r fit2, echo=FALSE}
fit2 <- lm(WinP_Tm ~ PTS_per_MP, data = df_LinR_filtered)
tidy(fit2, conf.int= TRUE)
```


```{r summary_fit2, echo=FALSE}
summary(fit2)
```

The removal of high influence points does not show any change to the intercept of WinP_Tm or Pts_per_MP

However visually, plotted without high influence points it looks a lot cleaner and linear.


```{r gg_fit2, echo=FALSE}
ggplot(data = df_LinR_filtered, aes(x = PTS_per_MP, y = WinP_Tm)) +
  geom_point(colour = "dodgerblue") +
  geom_smooth(method = "lm", colour = "magenta", se = FALSE) +
  geom_hline(yintercept = 50, colour = "black", linetype = "dashed")
```

The graph show a more even spread, and less influenced by the high points. 

### 9. Test for homoscedasticity within data set
<br>

```{r res_fit, echo=FALSE}
res <- residuals(fit)
fitted <- predict(fit)
```


```{r gg_res_fit, echo=FALSE}
ggplot(data = NULL, aes(x = fitted, y =res)) +
  geom_point(colour = "dodgerblue") +
  geom_hline(yintercept = 0, colour = "red", linetype = "dashed")
```

A test for homoscedasticity shows that the assumption for homoscedasticity is upheld by plotting the residuals against the fitted values. As such, there does not appear to be evidence of heteroscedasticity.


### 10. Assesment of normality

Are the residuals normally distributed?

```{r}
ggplot(data = NULL, aes(x = res)) +
  geom_histogram(colour = "black", fill = "dodgerblue", binwidth = 2)
```

There appears to be some slight skewness and doesn't look evenly distributed. This is likely from the points investigated for 
influence. These values did not appear to be influencing the results of the model.
This left skewed tail could be due to the large spread of players points scoring. 
A possible option is to collect more data, 
and also there are potentially other factors that contribute to winning.


```{r gg_plot_stat_qq, echo=FALSE}
ggplot(data = NULL, aes(sample = res)) +
  stat_qq() + stat_qq_line()
```


This simple linear regression demonstrates that PTS_per_MP is correlated with WinP_Tm in the NBA. Further analysis of the variables eFGp, EFF, TRB_MP, TrV, and Tm_use_total is proposed to assess their influence into PTS_per_MP and therefore WinP_Tm in a multiple linear regression.All assumptions have been satisfied, with some understanding of the bias of the data set and a multiple linear regression appears to be a robust statistical test to investigate to correlations in this data set. The decision to filter to 40 games for this linear regression was based on the idea to see what the most consistent players in the NBA were scoring, and how that influenced the Win %. This is important as we want players with a high team usage factor and thus high scoring to be influential at the Chicago Bulls.,

 
### 11. Linear model assessment 

How many more Points/min can be attained when controlling for other factors

```{r linear_model_PTS, include=FALSE, cache=FALSE}
lm_bb_hr <- lm(PTS_per_MP ~  eFGp + TRB_MP + Tm_use_total + EFF + TrV, data = df_nonTOT_clean)
tidy(lm_bb_hr, conf.int = TRUE)

tidy_lm_bb_hr <- tidy(lm_bb_hr, conf.int = TRUE)
```


```{r ltidy_linear_kable, echo=FALSE, cache=FALSE}
knitr::kable(tidy_lm_bb_hr, align = ('ccccccc'))
```

The table above shows that for every 1 increase of eFGp, PTS_per_MP will increase by .699. This is not exactly a practical example as this could equate to a player shooting at greater than 100% for their effective field goal percentage and would then surpass the highest point scorer/min at .98. As such, this number should be viewed as a rate indicator, if you could improve your team's eFGp across the board by 20 % you would see an increase in 0.13 to points/min. 


```{r fit_PTS_perMP, echo=FALSE, cache=FALSE}
fit <- lm(PTS_per_MP ~ eFGp + TRB_MP + Tm_use_total + EFF + TrV,
          data = df_nonTOT_clean)
tidy(fit, conf.int = TRUE)
```


### 12. Justification for data modelling  
<br>

In an effort to determine how much impact players have on their teams, the use of multiple developed metrics such as Usage Percentage, Efficiency Rate, Effective Field Goal Percentage, Trade Value combined with hard points per minute data i.e Points per minute and Total Rebounds per minute gives a well rounded assessment of a players value, and future worth to an organisation[@noauthor_2017-ev]. 

By selecting players that featured in greater than 40 games in the season and above select values in the selected key metrics, it is hypothesized that an increase in points/min could be achieved which is associated to an increased win percentage. 

As such, choosing players that contribute to increasing the team points per minute average, would equate to increased team wins, with a goal of achieving greater than 42 wins or 50% win percentage and progressing to playoffs.

Players who were transferred during the season were excluded from the analysis and predictive model. The basis of this decision was for the purposes of finding the best value players it was important to see which players contributed regularly to the overall team Win % and were consistently playing in the NBA.


```{r source_justification, include=FALSE, cache = TRUE}  
source("funcs/Bulls_multi_reg.R", local = TRUE)

```

#### Players with greater than 40 NBA games in 18/19 and who are non-transfer players:  

```{r non_TOT, echo=FALSE, dependson="source_justification", cache=FALSE}
DT::datatable((model_testing) %>%
  select(Tm, player_name, Age, Pos, salary, G, GS, MP, PTS_per_MP, exp_PTS_per_MP, eFGp, WinP_Tm, TrV, EFF, Tm_use_total, TRB_MP, TRB) %>% 
  arrange(desc(exp_PTS_per_MP), salary))

```

## {-}


```{r Bulls logo small-3-7G, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

 ***
# 5. Data modelling:

This section covers:

  * Player data analysis: 
  * Data modeling
    * Creating a multiple linear regression model,
  * Assumption checking
  * Model output and interpretation

The table below shows the non transfer NBA player group filtered to the select variables chosen for our analysis/model.

The selected variables are:

  * Position
  * Salary
  * Age
  * Team
  * Usage %
  * EFF Rate
  * Trade Value
  * eFG %
  * Points/min
  * Expected points/min
  * Total rebounds/min
  * Team Win %  

<br>
  
## NBA player group
  
```{r NBA_player_group, include=FALSE, cache=FALSE}
source("funcs/Bulls_Project_Fresh_start.R", local = TRUE)

```
  
```{r athlete_table, echo=FALSE}
DT::datatable((model_testing) %>%
  select(Tm, player_name, Age, Pos, salary, PTS_per_MP, exp_PTS_per_MP, eFGp, WinP_Tm, TrV, EFF, Tm_use_total, TRB_MP) %>% 
  arrange(desc(exp_PTS_per_MP), salary))

```
  
<br>
  
```{r source_bulls_multi_reg, include=FALSE, cache = TRUE}  

source("funcs/Bulls_multi_reg.R", local = TRUE)

library(knitr)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(broom)
library(performance)
library(psych)
library(ggrepel)
library(plotly)
library(DT)


```

## Multiple regression  {.tabset .tabset-pills}

### Assumption testing
<br>

#### Added-Variable Plots

```{r avPlot, echo=FALSE}
car::avPlots(fit)
```

#### Pairs Plots

[Multicollinearity](https://en.wikipedia.org/wiki/Multicollinearity) occurs when two or more of your explanatory variables are highly related with each other. It can lead to changes in the coefficient estimates and confusion around which variable is explaining the variance in the response variable. As such the multicollinearity undermines the statistical significance of an independent variable.

#### Below is a visual test for multicolinearity using a pairs plot.

```{r pairs, fig.retina = 2, echo=FALSE}
pairs(formula = ~ PTS_per_MP + eFGp + TRB_MP + Tm_use_total + EFF + TrV, data = df_nonTOT_clean)

```

#### Variance inflation factor

[Variance Inflation Factor](https://en.wikipedia.org/wiki/Variance_inflation_factor#:~:text=In%20statistics%2C%20the%20variance%20inflation,ordinary%20least%20squares%20regression%20analysis.) [@Stephanie2015-nd] was assessed to identify the correlation between predictors (i.e. independent variables) in a model; its presence can adversely affect your regression results. The VIF estimates how much the variance of a regression coefficient is inflated due to the variables being too alike/related to each other.

```{r car_fit, echo=FALSE, cache=FALSE}
library(knitr)
library(kableExtra)

car_fit <-car::vif(fit)

knitr::kable(car_fit, col.names = c('Variance inflation factor'), align = 'cc')
```

As all of our values are between 1 and 5, it is safe to say that there is some correlation between them. 

[Variance](https://www.statisticshowto.com/variance-inflation-factor/) between the predictive values used showed some "moderate correlation" when tested for multicollinearity. This is explainable due to the the aggregated nature of some of the statistics used i.e. similar variables were used across and within each metric.


#### Square root of VIF:

The square root of the VIF indicates how much larger the standard error increases compared to the scenario if that variable had 0 correlation to other predictors. From the table below all values are between 1.3 and 1.8, indicating a narrow margin of standard error. A solution to the standard error is to obtain more data across multiple seasons which will produce more precise coefficient estimates.

```{r SQ_Fit, echo=FALSE, dependson= "source_bulls_multi_reg"}
library(knitr)
library(kableExtra)
sqrt_fit <- sqrt(car::vif(fit))
knitr::kable(sqrt_fit, col.names = c('Square of VIF'), align = 'cc')
```

### Model output and interpretation
<br>

[Linear regression and assessment of fit](https://en.wikipedia.org/wiki/Linear_regression) shows the comparison between the predicted/expected values and the actual season observed values. Points above the line = under estimated, below the line = over estimated.

#### Assesment of fit
<br> 
```{r source_gg_model_testing, include=FALSE, cache = TRUE}  

source("funcs/Bulls_multi_reg.R", local = TRUE)

library(knitr)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(broom)
library(performance)
library(psych)
library(ggrepel)
library(plotly)
library(DT)


```

```{r gg_model_testing, echo=FALSE, cache=FALSE}
  ## model testing with Tm_exp_Pts_per_MP and Tm_Pts_per_MP
gg_model_testing <- ggplot(model_testing, aes(Tm_exp_Pts_per_MP, Tm_Pts_per_MP, label = Tm, color = Tm, label = Tm, group = 1, 
                                              text = paste("Team:", Tm,
                                                           "<br>Win%: ", round(WinP_Tm, digits = 4),
                                                           "<br>Actual Points: ", round(Tm_Pts_per_MP, digits = 4),"Pts/min",
                                                           "<br>Expected Points: ", round(Tm_exp_Pts_per_MP, digits = 4), "Pts/min"))) + 
  labs(title = "Model testing between Expected Points/min and Actual Points/min", 
       subtitle = "Points above the line = under estimated, below the line = over estimated", 
       caption = "compiled from data sources",
       colour = "Tm") +
  geom_point() +
  xlab("Expected Points/min") +
  ylab("Actual Points/min") +
  geom_point(alpha = 0.5) +
  geom_text(nudge_x = 0.005, cex = 3) +
  geom_abline(linetype = "dashed", colour = "magenta")

ggplotly(gg_model_testing, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))

```
<br>

#### Assesment of fit for Player Points/min

```{r ggplot_model_test, echo=FALSE, dependson="source_bulls_multi_reg"}
## model testing
gg_model_test <- ggplot(model_testing, aes(exp_PTS_per_MP, PTS_per_MP, label = "", color = Pos, label = Tm, group = 1, 
                                   text = paste("Team:", Tm,
                                                "<br>Name: ", player_name,
                                                "<br>Win %: =", WinP_Tm,
                                                "<br>Actual Points/min: ", round(PTS_per_MP, digits = 4), "Pts/min",
                                                "<br>Expected Points/min: ", round(exp_PTS_per_MP, digits = 4), "Pts/min"))) + 
  labs(title = "Line of best fit between Expected Points/min and Player Points/min", 
       subtitle = "Line of best fit showing expected vs observed values", 
       caption = "compiled from data sources",
       colour = "Pos") +
  geom_point(alpha = 0.5) +
  geom_text(nudge_x = 0.105, cex = 3) +
  geom_abline(linetype = "dashed", colour = "magenta") +
  xlab("Expected Points/min") +
  ylab("Actual Points/min") 

ggplotly(gg_model_test, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))


```


```{r source_bulls_multi_Actual, include=FALSE, cache = TRUE}  
source("funcs/Bulls_multi_reg.R", local = TRUE)
```

#### Comparison of Actual vs Expected Team Points/min vs Win (%)

```{r gg2_results, echo=FALSE}
library(plotly)
gg2 <- ggplot(data = model_testing, aes(x = Tm_exp_Pts_per_MP, y = WinP_Tm, label = Tm, group = 1,
                                        text = paste("Team: =", Tm,
                                                     "<br>Win%: ", round(WinP_Tm, digits = 4),
                                                     "<br>Actual Points: ", round(Tm_Pts_per_MP, digits = 4),"Pts/min",
                                                     "<br>Expected Points: ", round(Tm_exp_Pts_per_MP, digits = 4), "Pts/min")
        )) +
  geom_point(colour = "black", aes(Tm_Pts_per_MP, WinP_Tm)) +
  geom_point(colour = "#1dcae0") +
  geom_text(nudge_x = .00002, nudge_y = 1, cex = 3) +
  geom_hline(yintercept = 50, colour = "black", linetype = "dashed") +
  labs(title = "Team Win Percentage vs Expected points/minute", 
       subtitle = "Teams with increased pts/min have a higher winning % ", 
       caption = "Data sourced from the NBA stats packages, see reference list",
       colour = "Actual pts/min",
       fill = "Expected pts/min") +
  xlab("Pts per minute (Expected/Actual)") +
  ylab("Win Percentage") +
  theme_light()

ggplotly(gg2, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", 
                                       "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))

```


### Predictive formula for Points/minute

#### Predictive model for line of best fit
```{r fit_multi, echo=FALSE}

fit <- lm(PTS_per_MP ~ eFGp + TRB_MP + Tm_use_total + EFF + TrV,
          data = df_nonTOT_clean)
knitr::kable(tidy(fit, conf.int = TRUE), align = 'ccccccc')

```

A predictive formula based off multiple regression model:  

Using the approximate values drawn from the exploratory analysis below; 

  * eFG = 0.55
  * TRB_MP = .2
  * Tm_use_total = 0.2
  * EFF = 1500
  * TrV = 600

$$
\beta_1 = -0.382 + 0.699 * 0.55 + -0.0330 * 0.2 + 2.39 * 0.20 + 0.00000965 * 1500 + -0.00000803 * 600
$$

```{r predictive_formula, echo=FALSE}
# as such if 
#eFG = 0.55
#TRB_MP = .2
#Tm_use_total = 0.2
#EFF = 1500
#TrV = 600
#Predictive formula to PTS_per_MP
knitr::kable(-0.382 + 0.699 * 0.55 + -0.0330 * 0.2 + 2.39 * 0.20 + 0.00000965 * 1500 + -0.00000803 * 600, col.names = c('Points/min'), align = 'cc')
## [1] 0.483507 

```


The above selected figures were taken from the exploratory analysis gauged on a worst case scenario of player recruitment, with the minimum goal to achieve a points/min ration that would equate to a >50 Win %.

## {-}

  
```{r Bulls_logo_results, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

***
<br>

# 6. Results: 
<br>

The predictive model hypothesized and created above showed increasing association throughout the model building process. Albeit not a direct correlation, there is evidence of a repeated positive association to predicting a points/minute rate in NBA players/games. The below graphs shows an analysis of points expected and actual points observed compared to the Win % of each team. The graph featured below shows the projected 50% Win line, highlighting the teams who consistently produced winning results and their respective selected variables.

```{r source_scatter_lin, include=FALSE}
source("funcs/Bulls_multi_reg.R", local = TRUE)
```

#### Comparison of Actual vs Expected Team Points/min vs Win (%)

```{r gg2_results_comparison, echo=FALSE}
library(plotly)
gg2 <- ggplot(data = model_testing, aes(x = Tm_exp_Pts_per_MP, y = WinP_Tm, label = Tm, group = 1,
                                        text = paste("Team: =", Tm,
                                                     "<br>Win%: ", round(WinP_Tm, digits = 4),
                                                     "<br>Actual Points: ", round(Tm_Pts_per_MP, digits = 4),"Pts/min",
                                                     "<br>Expected Points: ", round(Tm_exp_Pts_per_MP, digits = 4), "Pts/min")
        )) +
  geom_point(colour = "black", aes(Tm_Pts_per_MP, WinP_Tm)) +
  geom_point(colour = "#1dcae0") +
  geom_text(nudge_x = .00002, nudge_y = 1, cex = 3) +
  geom_hline(yintercept = 50, colour = "black", linetype = "dashed") +
  labs(title = "Team Win Percentage vs Expected points/minute", 
       subtitle = "Teams with increased pts/min have a higher winning % ", 
       caption = "Data sourced from the NBA stats packages, see reference list",
       colour = "Actual pts/min",
       fill = "Expected pts/min") +
  xlab("Pts per minute (Expected/Actual)") +
  ylab("Win Percentage") +
  theme_light()

ggplotly(gg2, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", 
                                       "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))

```
##### Actual observed points = Black, Expected/Predicted = Blue

## {-}


```{r Bulls logo small-7-7G, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

 ***
# 7. Player Analysis and Recommendations:
```{r source_6_multi, dependson="source_bulls_multi_reg2", include=FALSE}
source("funcs/Bulls_multi_reg.R", local = TRUE)

```

Below is an analysis of teams winning percentage and there corresponding points/minute rate. Given Chicago's finishing position (bottom left corner of graph below) in both the conference and its overall Win-Loss ratio. The task to provide recommendation for 5 new starting players is essential.

```  {r scatter_relationship, echo=FALSE}
library(ggplot2)
library(plotly)
WinP_v_Tm_Pts <- ggplot(data = model_testing, aes(x = Tm_Pts_per_MP, y = WinP_Tm, color = Tm, label = Tm, group = 1, 
                                   text = paste("Team:", Tm,
                                                "<br>Win %: =", WinP_Tm,
                                                "<br>Points/min: ", round(Tm_Pts_per_MP, digits = 4), "Pts/min"))) + 
  labs(title = "Relationship between Team Win % and Team Points/min", 
       subtitle = "Teams have increased winning % with an increased pts/min", 
       caption = "compiled from data sources",
       colour = "Team") +
  geom_point() +
  geom_smooth(method = "lm", colour = "magenta", se = FALSE) +
  geom_hline(yintercept = 50, colour = "black", linetype = "dashed") +
  xlab("Team Points/min") +
  ylab("Team Win (%)") 

ggplotly(WinP_v_Tm_Pts, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))

### relationship between points per min and team winning percentage

```
 
<br>

The graphs below are an interactive representation of the players and their respective metrics utilised within our predictive model.

```{r Bulls_logo_PA, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))

```

***

<br>

## Points per/min vs Win percentage:  

```{r gg2, echo=FALSE}
library(plotly)
gg2 <- ggplot(data = model_testing, aes(x = Tm_exp_Pts_per_MP, y = WinP_Tm, label = Tm, group = 1,
                                        text = paste("Team: =", Tm,
                                                     "<br>Win%: ", round(WinP_Tm, digits = 4),
                                                     "<br>Actual Points: ", round(Tm_Pts_per_MP, digits = 4),"Pts/min",
                                                     "<br>Expected Points: ", round(Tm_exp_Pts_per_MP, digits = 4), "Pts/min")
        )) +
  geom_point(colour = "black", aes(Tm_Pts_per_MP, WinP_Tm)) +
  geom_point(colour = "#1dcae0") +
  geom_text(nudge_x = .00002, nudge_y = 1, cex = 3) +
  geom_hline(yintercept = 50, colour = "black", linetype = "dashed") +
  labs(title = "Team Win Percentage vs Expected points/minute", 
       subtitle = "Teams with increased pts/min have a higher winning % ", 
       caption = "Data sourced from the NBA stats packages, see reference list",
       colour = "Actual pts/min",
       fill = "Expected pts/min") +
  xlab("Pts per minute (Expected/Actual)") +
  ylab("Win Percentage") +
  theme_light()

ggplotly(gg2, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", 
                                       "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))
```
<br>

```{r Bulls_logo_sal, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))

```

***

## Player vs Salary analysis:

<br>

```{r source_bulls_multi_reg2, include=FALSE, cache = TRUE, dependson = "...."}  

source("funcs/Bulls_multi_reg.R", local = TRUE)

```

```{r gg, echo=FALSE}
library(plotly)
gg <- ggplot(data = model_testing, aes(x = salary/1000000, y = exp_PTS_per_MP, color = Pos, label = Tm, group = 1,
                                       text = paste("Name:", player_name,
                                                    "<br>Team: =", Tm,
                                                    "<br>Salary: ", salary,
                                                    "<br>Trade Value: ", TrV,
                                                    "<br>Efficiency: ", EFF,
                                                    "<br>Expected Points: ", round(Tm_exp_Pts_per_MP, digits = 4), "Pts/min",
                                                    "<br>Team Usage %:", Tm_use_total,
                                                    "<br>Total Rebounds/min:", TRB_MP))) + 
  labs(title = "Player Salary vs Expected points/minute", 
       subtitle = "Teams have increased winning % with an increased pts/min", 
       caption = "Data sourced from the fNBA stats package....",
       colour = "Position") +
  geom_point() +
  xlab("Salary (Millions)") +
  ylab("Expected Points/min")

ggplotly(gg, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", 
                                       "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))

```


```{r Bulls_logo_trade_vs_sal, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))

```

***

<br>

## Trade Value vs Salary: 

```{r gg3, echo=FALSE, fig.retina=2}
library(plotly)
gg3 <- ggplot(data = model_testing, aes(x = salary/1000000, y = TrV, color = Pos, label = Tm, group = 1,
                                        text = paste("Name:", player_name,
                                                     "<br>Team: =", Tm,
                                                     "<br>Salary: ", salary,
                                                     "<br>Trade Value: ", TrV,
                                                     "<br>Efficiency: ", EFF,
                                                     "<br>Expected Points: ", round(Tm_exp_Pts_per_MP, digits = 4), "Pts/min",
                                                     "<br>Team Usage %:", Tm_use_total,
                                                     "<br>Total Rebounds/min:", TRB_MP))) + 
  labs(title = "Player Trade Value vs Player Salary", 
       subtitle = "Teams have increased winning % with an increased pts/min", 
       caption = "Data sourced from the fNBA stats package....",
       colour = "Position") +
  geom_point() +
  xlab("Salary (Millions)") +
  ylab("Trade Value")

ggplotly(gg, tooltip = "text") %>% 
  config(displayModeBar = "static", displaylogo = FALSE, 
         modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                       "hoverClosestCartesian", "hoverCompareCartesian", "select2d", 
                                       "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))

```


```{r Bulls_logo_EFF_vs_pts, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))

```


***

<br>

## Efficiency rate vs Points/min: 

```{r recomendations_EFF_v_PTS_per_MP, echo=FALSE, cache=FALSE, dependson= "source_EFF_v_PTS_per_MP"}

 EFF_v_PTS_per_MP <- ggplot(data = df_nonTOT_clean, aes(x = EFF, y = PTS_per_MP, color = Pos, label = Tm, group = 1, 
                                                       text = paste("Name:", player_name,
                                                                    "<br>Team: =", Tm,
                                                                    "<br>Salary: ", salary,
                                                                    "<br>Trade Value: ", TrV,
                                                                    "<br>Efficiency: ", EFF,
                                                                    "<br>eFGp %: ", round(eFGp, digits = 4), "%",
                                                                    "<br>Points/min: ", round(PTS_per_MP, digits = 4), "Pts/min",
                                                                    "<br>Team Usage %:", Tm_use_total,
                                                                    "<br>Total Rebounds/min:", TRB_MP))) + 
    labs(title = "Relationship between EFF and Points/min", 
         subtitle = "Teams have increased Points/min with an increased EFF", 
         caption = "compiled from data sources",
         colour = "Pos") +
    geom_point() +
    geom_smooth(method = "lm", colour = "magenta", se = FALSE) +
    xlab("Points/min") +
    ylab("Efficiency Rating")
  
  ggplotly(EFF_v_PTS_per_MP, tooltip = "text") %>% 
    config(displayModeBar = "static", displaylogo = FALSE, 
           modeBarButtonsToRemove = list("sendDataToCloud", "toImage", "autoScale2d", "resetScale2d", 
                                         "hoverClosestCartesian", "hoverCompareCartesian", "select2d", "lasso2d", "zoomIn2d", "zoomOut2d", "toggleSpikelines"))
  
## EFF vs PTS_Per_MP  
```


```{r Bulls_logo_players, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))

```

***

<br>

## Player pool for selection.

```{r Top20_player_rec, include=TRUE, dependson= "source_bulls_multi_reg2"}
DT::datatable((model_testing) %>%
  select(Tm, player_name, Age, Pos, salary, G, GS, MP, PTS_per_MP, exp_PTS_per_MP, eFGp, WinP_Tm, TrV, EFF, Tm_use_total, TRB_MP, TRB) %>% 
  arrange(desc(exp_PTS_per_MP), EFF, caption = "Player selections.")) # initial table
```



```{r Bulls_logo_recom, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))

```

***
<br>

The players presented below both individually and collectively will see an increase in the Chicago Bulls points per minute rate and in doing so give the organisation the best chance to consistently play at above a 50% Win rate to progress through to playoffs. The players 

```{r source_player_reco, include=FALSE, cache=TRUE}
source("funcs/Bulls_multi_reg.R", local = TRUE)
```

## Recommended players for the Chicago Bulls 2019-2020 season:
```{r player_reco, echo=FALSE, dependson="source_bulls_multi_reg2"}

player_reco <- filter(model_testing, player_name %in% c("Devin Booker", "Kawhi Leonard", "Ben Simmons", "Julius Randle", "Karl-Anthony Towns")) %>%
  select(Tm, player_name, Age, Pos, salary, G, GS, MP, PTS_per_MP, exp_PTS_per_MP, eFGp, WinP_Tm, TrV, EFF, Tm_use_total, TRB_MP, TRB)

DT::datatable(player_reco)
```


#### Key figures of listed of players:

  * **SG = Devin Booker (PHO):** 
      * Highest points/min and points/game   
      * Efficiency rating  >1700 
      * Trade value  >700  
      * Utilised >30% in Team usage   
      * Salary = 3.3 Million  
      <br>
  * **SF = Kawhi Leonard (TOR):**  
      * Highest PT_per_MP for role   
      * EFficiency rating >1700   
      * Trade Value >600    
      * High quantity of Games and Games Started with an eFGP of 54%   
      * Good age for Small Forward   
      * Salary = 23 Million - Identified as marque player 
      <br>  
  * **PG = Ben Simmons (PHI):**  
      * Highest Trade Value   
      * Efficiency rating > 2000   
      * Utilised 22% usage rating  
      * Above 50% eFGp = 0.56   
      * Scoring at good rate combined with high efficiency rate for role, PTS_per_MP = .49   
      * Salary = 6.4 Million  
      <br>
  * **PF = Julius Randle (NOP):**     
      * Started more than 50% of games and played in 73 overall  
      * Ranked 4th for Pts/min for position = Pts_per_MP .70  
      * 3rd highest for Efficiency 1873 for role   
      * 3rd highest Trade Value = 695.8854   
      * eFGp of 55%  
      * Salary = 8.6 Million  
      * Utilised > 21% usage rating  
      * Top 10 for total rebounds per minute for PF role = .28   
      <br>
  * **C = Karl-Anthony Towns (MIN):**   
      * Trade Value >700 = 3rd highest for position  
      * Efficiency rating, highest for position >1700   
      * Utilised >.21 usage rate   
      * Above average eFGp = > .58 eFGP   
      * 3rd highest for Points/min >.73 and >24 PTS/game   
      * Salary = 7.8 Million  
      

The combined cost of the above mentioned 5 players totals equals:

```{r player_total cost, include=TRUE}

kable((7839435	+ 8641000	+ 6434520	+ 3314365	+ 23114066), col.names = c('Total Cost'), align = ('c'))
  
```

The required amount to purchase 5 new starting players ($49,343,386 USD) leaves a residual amount of \$68, 656,614 USD in the budget to purchase/retain the remaining 10 players needed for a full NBA roster for the 2019-20 season. On average, the residual equates to 6.8 million USD per player, which given the analysis provided is ample to continue to field a robust and extremely competitive new team for the Chicago Bulls organisation.


```{r logo_limit, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

 ***
# 8. Limitations:  

Albeit satisfying the majority of assumptions within acceptable levels, there are inherent biases within this project/model. Several teams throughout their season achieved greater than predicted scoring ratios as such highlighting that there are elements of game play that have not been accurately recorded/reported, in combination with injuries/illnesses that may affect the actual starting line-up of a team, these factors amongst others may be a contribution to varying of results.

There is inherent bias present within the predictive model; utilising explanatory variables that demonstrate correlation carries with it the dependency of execution of said trend, i.e. if a player is out of favour with a coach and not seeing game time can therefore not perform (for example the transfer players), or a certain player has a dependency on another player delivering him the ball in his key position will impact on the modeling and analysis.[@noauthor_2021-au] 

An element of survivorhsip bias is present, as the NBA hosts the best of the best players in the world and then using numeric trends to separate them could higlight a lack of independence of data/variables. 

The selection of players who played multiple positions and for multiple teams during the 2018/2019 season were excluded from the analysis. The data set was filtered to display players who had played for 40 or more games, which is just under 50% of the games for the season, as it was evident that the better performing players in each position played the vast majority of the 82 games of the season. 

Lastly, the inlcusion of some team specific factors within metrics could influence the perception of the individual player's performance. For example, a really good player who's usage rating is high may have a lower efficiency or poor eFG % due to lack of possession of the ball in scoring opportunities[@noauthor_2017-om]. Conversely, you may have an average player in a very good team. This limitation was attempted to be addressed in the decision to bring the statistics down to a minute played ratio, to aid in the reduction of bias.

<br>

```{r Bulls logo small-5-7G, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

 ***
<br>

# 9. Summary:

This project highlighted several trends within the NBA data and the NBA overall standings results. This mode of retrospective/prospective analysis still relies on the game based execution of set actions/reactions. This can be seen within the confidence intervals within each predictive variable, showing the margin for difference between expected and observed.

As mentioned before, Dean Oliver refers to the ["Four Factors"](http://www.rawbw.com/~deano/articles/20040601_roboscout.htm) of Basketball adding that metrics/ratings can be broken down into four elements of the game:

  * **Shooting**   
  * **Turnovers**  
  * **Rebounding**, and   
  * **Getting to the foul line** 
  
These four elements, or "Four Factors," allow a strategic framework of understanding to be extracted from the game.

It is in this framework that I believe that using a multifaceted approach to the analysis of player performance decreases the disparity between observed results and predictive results.

The purpose and problem that this method of analysis addresses is a way to see through the inflated market values for athletes and highlight the true value of players based on their repeated habits and trends of play. I believe that the predictive formula created in this analysis can provide valuable insight into the real value and contribution players are making/could make in a new team.

```{r Bulls logo small-6-7G, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```

 ***
<br/>

# 10. Glossary:

**NBA standard terms:**  

  *  [Glossary of NBA Statistics](https://www.basketball-reference.com/about/glossary.html)   
  *  [Basteball Positions](https://en.wikipedia.org/wiki/Basketball_positions)  

**Project specific:** 

  * Pos = Position  
  * Tm = Team, abbreviated to three letters, i.e Chicago = CHI, Houston = HOU etc.  
  * '..._MP' = Statistic at a per minute rate  
  * 'TM_...' = Statistic as a team total  
  * Tm_use_total = [Usage Rate](https://www.nbastuffer.com/analytics101/usage-rate/) is the total use by the team as a percentage across the total number of minutes played
  * TrV = [Trade Value](https://www.nbastuffer.com/analytics101/trade-value/) as an estimation of athlete value taking into account athlete age and game based statistics
  * eFGp = [Effective Field Goal Percentage (eFGp)](https://www.basketball-reference.com/about/glossary.html#:~:text=eFG%25%20%2D%20Effective%20Field%20Goal%20Percentage,for%2010%20with%200%20threes.) allows comparison of 2 and 3 point shooters
  * EFF = [Efficiency Value](https://www.nbastuffer.com/analytics101/nba-efficiency/) is an indicator of an athletes linear efficiency

**Data frame specific**  

[2018-19_nba_player-statistics.csv](https://www.basketball-reference.com/leagues/NBA_2019_totals.html)  

This data file provides total statistics for individual NBA players during the 2018-19 season.  
The variables consist:  

  * player_name : Player Name
  * Pos :  (PG = point guard, SG = shooting guard, SF = small forward, PF = power forward, C = center) 
  * Age : Age of Player at the start of February 1st of that season.
  * Tm : Team
  * G : Games
  * GS : Games Started
  * MP : Minutes Played
  * FG : Field Goals
  * FGA : Field Goal Attempts
  * FG% : Field Goal Percentage
  * 3P : 3-Point Field Goals
  * 3PA : 3-Point Field Goal Attempts
  * 3P% : FG% on 3-Pt FGAs
  * 2P : 2-Point Field Goals
  * 2PA : 2-point Field Goal Attempts
  * 2P% : FG% on 2-Pt FGAs
  * eFG% : Effective Field Goal Percentage
  * FT : Free Throws
  * FTA : Free Throw Attempts
  * FT% : Free Throw Percentage
  * ORB : Offensive Rebounds
  * DRB : Defensive Rebounds
  * TRB : Total Rebounds
  * AST : Assists
  * STL : Steals
  * BLK : Blocks
  * TOV : Turnovers
  * PF : Personal Fouls
  * PTS : Points  
  <br>
    * NB: Players that were traded during the season may appear more than once (on more than one row) so it is important to handle these duplications appropriately.
<br>

[2018-19_nba_player-salaries.csv](https://hoopshype.com/salaries/)  

This data file contains the salary for individual players during the 2018-19 NBA season.   
The variables consist:  

  * player_id : unique player identification number
  * player_name : player name
  * salary : year salary in $USD
<br>

[2019-20_nba_team-payroll.csv](https://hoopshype.com/salaries/)  

This data file contains the team payroll budget for the 2019-20 NBA season.  
The variables consist:  

  * team_id : unique team identification number
  * team : team name
  * salary : team payroll budget in 2019-20 in $USD
<br>

[2018-19_nba_team-statistics_1.csv](https://www.basketball-reference.com/leagues/NBA_2019.html)  

This data file contains miscellaneous team statistics for the 2018-19 season. 

  The variables consist:  

  * Rk : Rank
  * Age : Mean Age of Player at the start of February 1st of that season.
  * W : Wins
  * L : Losses
  * PW : Pythagorean wins, i.e., expected wins based on points scored and allowed
  * PL : Pythagorean losses, i.e., expected losses based on points scored and allowed
  * MOV : Margin of Victory
  * SOS : Strength of Schedule; a rating of strength of schedule. The rating is denominated in points above/below average, where zero is average.
  * SRS : Simple Rating System; a team rating that takes into account average point differential and strength of schedule. The rating is denominated in points above/below average, where zero is average.
  * ORtg : Offensive Rating; An estimate of points produced (players) or scored (teams) per 100 possessions
  * DRtg : Defensive Rating; An estimate of points allowed per 100 possessions
  * NRtg : Net Rating; an estimate of point differential per 100 possessions.
  * Pace : Pace Factor: An estimate of possessions per 48 minutes
  * FTr : Free Throw Attempt Rate; Number of FT Attempts Per FG Attempt
  * 3PAr : 3-Point Attempt Rate; Percentage of FG Attempts from 3-Point Range
  * TS% : True Shooting Percentage; A measure of shooting efficiency that takes into account 2-point field goals, 3-point field goals, and free throws.
* eFG% : Effective Field Goal Percentage; This statistic adjusts for the fact that a 3-point field goal is worth one more point than a 2-point field goal.
* TOV% : Turnover Percentage; An estimate of turnovers committed per 100 plays.
* ORB% : Offensive Rebound Percentage; An estimate of the percentage of available offensive rebounds a player grabbed while he was on the floor.
* FT/FGA : Free Throws Per Field Goal Attempt
* DRB% : Defensive Rebound Percentage
<br>

[2018-19_nba_team-statistics_2.csv](https://www.basketball-reference.com/leagues/NBA_2019.html)  

This data file contains total team statistics for the 2018-19 NBA season.  

The variables consist:  

  * Team : Team name  
  * Rk : Ranking  
  * MP : Minutes Played  
  * G : Games  
  * FG : Field Goals  
  * FGA : Field Goal Attempts  
  * FG% : Field Goal Percentage  
  * 3P : 3-Point Field Goals  
  * 3PA : 3-Point Field Goal Attempts  
  * 3P% : FG% on 3-Pt FGAs  
  * 2P : 2-Point Field Goals  
  * 2PA : 2-point Field Goal Attempts  
  * 2P% : FG% on 2-Pt FGAs  
  * FT : Free Throws  
  * FTA : Free Throw Attempts  
  * FT% : Free Throw Percentage  
  * ORB : Offensive Rebounds  
  * DRB : Defensive Rebounds  
  * TRB : Total Rebounds  
  * AST : Assists  
  * STL : Steals  
  * BLK : Blocks  
  * TOV : Turnovers  
  * PF : Personal Fouls 
  * PTS : Points  
<br/>


```{r Bulls logo small-8-7G, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))
```
 
***
***
**Dr. Jocelyn Mara:** Data Analysis in Sport PG[@Mara_undated-by], University of Canberra, 2021   
**Martin Manley:** Kansas City sports reporter and statistician, EFF calculation.    
**Bill James:** Statistician, Trade Value calculation, Approximate Value calculation, Credits Calculation.  
**John Hollinger:** Effective Field Goal percentage and Usage Rate calculation  
**Dean Oliver:** Effective Field Goal percentage and Usage Rate calculation  
[**Basketball-reference.com**](https://www.basketball-reference.com/)  
[**Chicago Bulls Logo**](https://www.gerbenlaw.com/trademarks/nba/chicago-bulls/) 


```{r bulls_logo_ref, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))

```

***
<br>
This project was designed and built through **[RStudio](https://www.rstudio.com/)**, Version 1.4.1103, © 2009-2021 RStudio, PBC  
<br>



```{r Bulls logo small-4-7G, echo=FALSE, fig.cap="", out.width = '7.5%',fig.width = 6, fig.asp = 0.618, fig.align = "right"}
knitr::include_graphics(rep("images/Chicago_bulls_logo7G.jpeg"))

```

***
<br>

# 11. References:
